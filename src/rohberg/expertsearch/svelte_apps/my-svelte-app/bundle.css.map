{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "ExpertSearch.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount } from \"svelte\";\n  import { scale } from \"svelte/transition\";\n  import { flip } from \"svelte/animate\";\n\n  let searchstring = '';\n  let region = 'Alle Regionen';\n  // TODO menuregions according values in backend index\n  let menuregions = [\n    'Alle Regionen',\n    'Zürich Stadt',\n    'Zürich Oberland',\n    'Zürich Unterland',\n    'Albis',\n    'Winterthur',\n  ]\n  \n  let apiURL = __myapp.env.API_URL;\n  apiURL = apiURL + '@search?portal_type=' + __myapp.env.PORTAL_TYPE + '&fullobjects=1&sort_on=last_name&sort_order=ascending';\n\n  let searchUrl = ''\n  let experts = [];\n\n  function setSearchUrl(region='Alle Regionen', searchstring='') {\n    searchUrl = ((region == 'Alle Regionen') ? apiURL : apiURL + '&region=' + encodeURI(region))\n      + (searchstring ? ('&SearchableText=' + searchstring) : '');\n  };\n\n  async function getExperts(url=apiURL) {\n    fetch(url, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    })\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    })\n    .then(data => {\n      experts = data?.items || [];\n      experts = experts.length > 0 ? experts.filter(exp => exp.is_expert) : [];\n      console.log(experts);\n      return experts;\n    })\n    .catch(error => {\n      console.error('There has been a problem with your fetch operation:', error);\n    });\n  };\n\n  onMount(() => {\n    getExperts()\n  })\n\n  const handleClickRegion = (event) => {\n    region = event.target.value;\n    setSearchUrl(region, searchstring);\n    console.log(\"apiURL\", apiURL);\n    getExperts(searchUrl);\n  }\n  const handleSearchstring = (event) => {\n    searchstring = event.target.value + (event.target.value ? '*':'');\n    setSearchUrl(region, searchstring);\n    getExperts(searchUrl);\n  }\n</script>\n\n\n<form action=\"\">\n  <input class=\"searchstring\" placeholder=\"Suche\"\n    on:keyup={handleSearchstring}\n    >\n  <br>\n  {#each menuregions as menuregion}\n    <input \n      type=button\n      class=\"regionbutton\"\n      class:selected=\"{region === menuregion}\"\n      on:click|preventDefault={handleClickRegion}\n      value={menuregion}>\n  {/each}\n</form>\n<p class=\"debug\"><i>Search{#if searchstring}{' '}for {searchstring}{/if} in {region}</i></p>\n\n<div class=\"debug\">\n  searchstring: {searchstring}<br>\n  region: {region}<br>\n  <!-- experts: <br>{JSON.stringify(experts)}<br> -->\n</div>\n\n<div class=\"cards\">\n  {#each experts as expert, i (expert['@id'])}\n    <div class=\"card\" transition:scale animate:flip={{ duration: 300 }}>\n      <div class=\"portrait\">\n        <img src=\"{expert.image?.download || ''}\" alt=\"Portrait\" />\n      </div>\n      <div class=\"fullname\">{expert.first_name} {expert.last_name}</div>\n      {#if expert.telnr}\n        <div class=\"telephone\">{expert.telnr}</div>\n      {/if}\n      <div class=\"email\"><a href=\"mailto:{expert.email}\">{expert.email}</a></div>\n      {#if expert.competence}\n        <div class=\"competence\">{expert.competence}</div>  \n      {/if}\n      {#if expert.organisation}\n        <div class=\"organisation\">{expert.organisation}</div>  \n      {/if}\n      {#if expert.region}\n        <div class=\"region\">{expert.region}</div>\n      {/if}\n    </div>\n  {:else}\n    <p>Keine Experten gefunden</p>\n  {/each}\n</div>\n\n\n<style>\n  /* h3 {\n    text-transform: uppercase;\n    font-size: 3em;\n    font-weight: 100;\n  } */\n  .searchstring,\n  .searchstring:focus {\n    border: none;\n    border-bottom:  2px solid darkgrey;\n    border-radius: 0;\n    margin-bottom: 1em;\n  }\n  .searchstring:focus {\n    border: none;\n    border-bottom:  2px solid #007cbf;\n    outline: none;\n  }\n  .regionbutton {\n    font-size: 80%;\n    margin: 0 .5em .6em 0;\n    background-color: white;\n    border: 2px solid #007cbf;\n    border-radius: 8px;\n    outline: none;\n  }\n  .regionbutton.selected {\n    border-color: #00507a;\n    color: #00507a;\n  }\n  .cards {\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 2rem;\n  }\n  .card {\n    /* width: 20rem;\n    min-width: 10rem;    \n    height: 10rem; */\n    width: 20em;\n    min-height: 10em;\n    background: white;\n    margin: 0 1rem 1rem 0;\n    padding: 1.5rem 1rem;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);\n    border-radius: 3px;\n  }\n  .fullname {\n    margin-bottom: 1em;\n  }\n  .telephone,\n  .email,\n  .competence,\n  .organisation,\n  .region {\n    font-size: 90%;\n    margin-bottom: .1em;\n  }\n  .email {\n    margin-bottom: .6em;\n  }\n  .portrait {\n    float: right;\n    height: 100px;\n    width: 100px;\n    overflow: hidden;\n  }\n  .portrait img {\n    width: 100%;\n  }\n\n  .debug {\n    display: none;\n    font-family: 'Courier New', Courier, monospace;\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "AA8HE,2CAAa,CACb,2CAAa,MAAM,AAAC,CAAC,AACnB,MAAM,CAAE,IAAI,CACZ,aAAa,CAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAClC,aAAa,CAAE,CAAC,CAChB,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,2CAAa,MAAM,AAAC,CAAC,AACnB,MAAM,CAAE,IAAI,CACZ,aAAa,CAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CACjC,OAAO,CAAE,IAAI,AACf,CAAC,AACD,aAAa,8BAAC,CAAC,AACb,SAAS,CAAE,GAAG,CACd,MAAM,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CACrB,gBAAgB,CAAE,KAAK,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,IAAI,AACf,CAAC,AACD,aAAa,SAAS,8BAAC,CAAC,AACtB,YAAY,CAAE,OAAO,CACrB,KAAK,CAAE,OAAO,AAChB,CAAC,AACD,MAAM,8BAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,KAAK,8BAAC,CAAC,AAIL,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CACrB,OAAO,CAAE,MAAM,CAAC,IAAI,CACpB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACzC,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,SAAS,8BAAC,CAAC,AACT,aAAa,CAAE,GAAG,AACpB,CAAC,AACD,wCAAU,CACV,oCAAM,CACN,yCAAW,CACX,2CAAa,CACb,OAAO,8BAAC,CAAC,AACP,SAAS,CAAE,GAAG,CACd,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,MAAM,8BAAC,CAAC,AACN,aAAa,CAAE,IAAI,AACrB,CAAC,AACD,SAAS,8BAAC,CAAC,AACT,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KAAK,CACZ,QAAQ,CAAE,MAAM,AAClB,CAAC,AACD,wBAAS,CAAC,GAAG,eAAC,CAAC,AACb,KAAK,CAAE,IAAI,AACb,CAAC,AAED,MAAM,8BAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,SAAS,AAChD,CAAC"
}